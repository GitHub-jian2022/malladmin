(this.webpackJsonpmobile=this.webpackJsonpmobile||[]).push([[17],{199:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(104),a=n.n(r),o=n(105),s=n(14),c=n(85),i=n(26),u=function(e){var t=e.phone,n=e.password;return function(){var e=Object(o.a)(a.a.mark((function e(r){var o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.b.post(c.a.login,{phone:t,password:n});case 2:o=e.sent,u={type:s.b,data:o.data},r(u),i.a.setItem("token",JSON.stringify(o.data),2),r(l(o.data));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){var r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.post(c.a.getUserInfo,{token:e});case 2:r=t.sent,o=r.data,localStorage.setItem("user",JSON.stringify(o)),i={type:s.a,data:o},n(i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},200:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(251),a="useyourkey";function o(e){return r.AES.encrypt(e,a).toString()}},257:function(e,t){},258:function(e,t){},268:function(e,t){},269:function(e,t){},289:function(e,t){},291:function(e,t){},292:function(e,t){},293:function(e,t){},294:function(e,t){},301:function(e,t){},304:function(e,t){},310:function(e,t){},313:function(e,t){},501:function(e,t,n){},576:function(e,t,n){"use strict";n.r(t);n(227);var r=n(228),a=n.n(r),o=n(104),s=n.n(o),c=(n(70),n(71)),i=n.n(c),u=n(105),l=n(54),f=n(55),p=n(57),d=n(56),g=n(0),m=n.n(g),h=n(2),b=n(25),v=n(199),w=n(85),k=(n(501),n(200)),O=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={phone:"",password:""},e.register=Object(u.a)(s.a.mark((function t(){var n,r,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=n.phone,a=n.password,!(""==r.trim()||r.length<11)){t.next=4;break}return i.a.fail("\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e",1),t.abrupt("return");case 4:if(""!=a.trim()){t.next=9;break}return i.a.fail("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",1),t.abrupt("return");case 9:if(!(a.length<6)){t.next=12;break}return i.a.fail("\u5bc6\u7801\u957f\u5ea6\u5e94\u4e0d\u5c0f\u4e8e6\u4f4d\u6570",1),t.abrupt("return");case 12:return t.next=14,w.b.post(w.a.register,{phone:r,password:Object(k.a)(a)});case 14:401==(o=t.sent).code?i.a.fail(o.msg,1):e.props.login({phone:r,password:Object(k.a)(a)});case 16:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return m.a.createElement(g.Fragment,null,m.a.createElement("div",{className:"bg"}),m.a.createElement("div",{className:"login"},m.a.createElement("div",{className:"registered"},m.a.createElement("h3",{onClick:function(){e.props.history.push("/login")}},"\u767b\u5f55")),m.a.createElement("div",{className:"userName"},m.a.createElement(a.a,{placeholder:"\u624b\u673a\u53f7",clear:!0,onChange:function(t){return e.setState({phone:t})}})),m.a.createElement("div",{className:"password"},m.a.createElement(a.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",clear:!0,onChange:function(t){return e.setState({password:t})}})),m.a.createElement("div",{className:"login_btn",onClick:this.register},"\u6ce8\u518c")))}}]),n}(g.Component);t.default=Object(h.g)(Object(b.b)(null,(function(e){return{login:function(t){e(Object(v.a)(t))}}}))(O))},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="http://47.100.138.242:8090/api",a="http://47.100.138.242:8090"},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return l}));n(70);var r=n(71),a=n.n(r),o=n(121),s=n.n(o),c=n(66),i=n(26),u=s.a.create({baseURL:c.a});u.interceptors.request.use((function(e){e.timeout=2e4;var t=i.a.getItem("token")||"";return t&&(e.headers.Authorization="Bearer "+t),e}),(function(e){return console.log("error: ",e),Promise.reject(e)})),u.interceptors.response.use((function(e){return console.log("response.data: ",e.data),(403===e.data.code||500===e.data.code)&&a.a.fail(e.data.msg,2,null,!0),e.data}),(function(e){return a.a.fail(e.response.msg,2,null,!0),Promise.reject(e)}));var l=u,f={login:"/user/login",register:"/user/register",getUserInfo:"/user/getUserInfo",getBanners:"/home/getBanners",getNavs:"/home/getNavs",getAdverts:"/home/getAdverts",getCate:"/cate",getCartList:"/alliance/cartList",getGoodsList:"/goods/list",getGoodInfo:"/alliance/goodInfo",getOrderList:"/alliance/order/list"}}}]);
//# sourceMappingURL=17.b7973237.chunk.js.map